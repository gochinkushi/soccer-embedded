language: cpp
os: osx  
install:  
  - brew cask install eclipse-cpp gcc-arm-embedded  
  - /usr/local/Eclipse\ CPP.app/Contents/MacOS/eclipse -noSplash   
    -application org.eclipse.equinox.p2.director   
    -repository http://gnuarmeclipse.sourceforge.net/updates   
    -installIUs ilg.gnuarmeclipse.managedbuild.cross.feature.group   
    -profileProperties org.eclipse.update.install.features=true  
  - cd /usr/local
  - ls
script:  
  - /usr/local/Eclipse\ CPP.app/Contents/MacOS/eclipse -noSplash   
    -application org.eclipse.cdt.managedbuilder.core.headlessbuild   
    -importAll $TRAVIS_BUILD_DIR/Robot_F4   
    -cleanBuild all  

    - pwd
    - find $TRAVIS_BUILD_DIR -type f -path "*/soccer-embedded/Robot*.mk" -exec perl -pi.bak -e 's/(C|D):[A-Za-z:]*.*?soccer-embedded/\$TRAVIS_BUILD_DIR/g' {} \;
    - cd $TRAVIS_BUILD_DIR/Robot_F4/Debug
    - cd hardware
    - cat subdir.mk
    - cd ../
    - ls
    - make
    - cd $TRAVIS_BUILD_DIR/Robot_F7/Debug
    - ls
    - make
